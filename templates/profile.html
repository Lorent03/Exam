{% extends "base.html" %}

{% block title %}Профиль{% endblock %}

{% block content %}
<div class="container my-5">
    <h2>Профиль пользователя</h2>
    {% for cat, msg in get_flashed_messages(True) %}
    <div class="flash {{cat}}">{{msg}}</div>
    {% endfor %}
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Имя пользователя: {{ current_user.username }}</h5>
            <form method="POST" action="{{ url_for('change_password') }}">
                <div class="form-group">
                    <label for="current_password">Текущий пароль</label>
                    <input type="password" class="form-control" id="current_password" name="current_password" required>
                </div>
                <div class="form-group">
                    <label for="new_password">Новый пароль</label>
                    <input type="password" class="form-control" id="new_password" name="new_password" required>
                </div>
                <div class="form-group">
                    <label for="confirm_password">Подтвердите новый пароль</label>
                    <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
                </div>
                <button type="submit" class="btn btn-primary">Сменить пароль</button>
            </form>
            <hr>
            <a href="{{ url_for('delete_account') }}" class="btn btn-danger">Удалить аккаунт</a>
            <a href="{{ url_for('user_history') }}" class="btn btn-primary">История запросов</a>
            {% if is_admin %}
            <a href="{{ url_for('admin_panel') }}" class="btn btn-primary">Админ-панель</a>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
